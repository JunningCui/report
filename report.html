<!DOCTYPE html>
<html >
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,user-scalable=no">
<meta name="apple-mobile-web-app-capable" content=”yes” />
<meta content="yes" name="apple-mobile-web-app-capable">
<meta content="black" name="apple-mobile-web-app-status-bar-style">
<meta content="telephone=no" name="format-detection">
<meta content="email=no" name="format-detection">
<link rel="stylesheet" type="text/css" href="./css/index.css">
<title>reportSwiper</title>
</head>
<script type="text/javascript">
	;(function (doc, win) {
    var docEl = doc.documentElement,
      resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
      recalc = function () {
        var clientWidth = docEl.clientWidth;
        var clientHeight = docEl.clientHeight;
        if (!clientWidth) return;
        if (clientWidth < clientHeight) {
            docEl.style.fontSize = 100 * (clientWidth / 750) + 'px';
        }else{
          docEl.style.fontSize = 50 * (clientWidth / 1334) + 'px';
        }
      };
    if (!doc.addEventListener) return;
    win.addEventListener(resizeEvt, recalc, false);
    doc.addEventListener('DOMContentLoaded', recalc, false);   
	})(document, window);
</script>
<body>
<div class="swiper-container">
    <div class="swiper-wrapper">
    	

        <div class="swiper-slide bg1" >
        	<div class="bgTop bgTop1">
        		<img src="./img/bg1Top.png">
        	</div>
        	<div class="indexTitleBox">
        		<p class="title pb9">学情报告</p>
        		<p class="class">三年二班</p>
        		<p class="school">北京市师范大学附属小学</p>
        		<p class="teacher">布克老师</p>
        	</div>
        	<div class="jumpArr">
        		<img src="./img/bg1Arr.png">
        	</div>
        	<div class="bgBottom">
        		<img src="./img/bg1Bottom.png">
        	</div>
        </div>
        <div class="swiper-slide bg2" >
        	<div class="bgTop bgTop2">
        		<img src="./img/bg2Top.png">
        	</div>
        	<div class="dataShowBox">
        		<p class="commonTitle">学情概要</p>
        		<div class="box position1">
        			<p class="boxHead">布置作业</p>
        			<p><span id="J_ClassWorksNums" class="numTip J_ClassWorksNums"></span>次</p>
        		</div>
        		<div class="box position2">
        			<p class="boxHead">包含知识点</p>
        			<p><span class="J_kownledgeQuanlity numTip"></span>个</p>
        		</div>
        		<div class="box position3">
        			<p class="boxHead">包含题目</p>
        			<p><span class="J_dataquesitionQuan numTip"></span>道</p>
        		</div>
        		<div class="box position4">
        			<p class="boxHead font48B">学期时间</p>
        			<p><span id="learnDuringTime" class="numTip font36"></span></p>
        		</div>
        		<div class="box position5">
        			<p class="boxHead">平均提交率</p>
        			<p><span class="numTip J_classSubmissionRate"></span>%</p>
        		</div>
        		<div class="box position6">
        			<p class="boxHead">平均正确率</p>
        			<p><span id="rightRate" class="numTip J_Rate"></span>%</p>
        		</div>
        		<div class="clear"></div>
        	</div>
        	<div class="jumpArr">
        		<img src="./img/bg1ArrB.png">
        	</div>
        	<div class="bgBottom">
        		<img src="./img/bg2Bottom.png">
        	</div>
        </div>
        <div class="swiper-slide" >
        	<div class="bgTop bgTop3" style="height: 7rem;">
        		<img src="./img/bg3Top.png">
        		<div class="averageRate">
        			<p><span class="J_Rate"></span>%</p>
        		</div>
        		<div class="maleRate">
        			<p><span class="J_maleRate"></span>%</p>
        			男生
        		</div>
        		<div class="femaleRate">
        			<p><span class="J_femaleRate"></span>%</p>
        			女生
        		</div>
        	</div>
        	<div class="titleBox">
	        	<div class="commonTitleB">
	        		作业正确率
	        	</div>
	        	<div class="commonTitleGLi">
	        		<ul>
	        			<li>班群平均正确率</li>
	        		</ul>
	        	</div>
        	</div>
        	<div class="jumpArr">
        		<img src="./img/bg1Arr.png">
        	</div>
        	<div class="bgBottom bgBottom3">
        		<img src="./img/bg3Bottom.png">
        		<div class="rightRateBox">
        			<div class="reverageRate">
        				<span class="percentBarNoteText">全国平均正确率</span>
        				<div class="percentBar">
        					<div class="percentText"><span  class="J_averageRightRateAll"></span><i class="font24">%</i></div>
        					<div class="J_averageRightRateAllPercent coverPercent"></div>
        				</div>
        			</div>
        			<div class="reverageRate">
        				<span class="percentBarNoteText">全省(<span class="J_provinceName"></span>)平均正确率</span>
		        		<div class="percentBar J_percentBarP">
		        			<div class="percentText">
		        				<span id="J_percentProvince" class="J_provinceRightRate"></span><i class="font24">%</i>
		        			</div>
							<div class="J_provincePercent coverPercent"></div>
        				</div>
        			</div>
        			<div class="provinceReverageRate"></div>
        		</div>
        	</div>
        </div>
        <div class="swiper-slide " >
        	<div class="bgTop bgTop3" style="height: 7rem;">
        		<img src="./img/bg4Top.png">
        		<div class="averageRate ">
        			<p><span class="J_averageTime"></span>s</p>
        		</div>
        		<div class="maleRate">
        			<p><span class="J_maleTime"></span>s</p>
        			男生
        		</div>
        		<div class="femaleRate">
        			<p><span class="J_femaleTime"></span>s</p>
        			女生
        		</div>
        	</div>
        	<div class="titleBox">
	        	<div class="commonTitleB">
	        		作业耗时
	        	</div>
	        	<div class="commonTitleGLi">
	        		<ul>
	        			<li>班群平均速度</li>
	        		</ul>
	        	</div>
        	</div>
        	<div class="jumpArr">
        		<img src="./img/bg1Arr.png">
        	</div>
        	<div class="bgBottom bgBottom4">
        		<img src="./img/bg3Bottom.png">
        		<div class="averageSpeedBox">
        			<div class="averageSpeedR">
        				<div class="averageSpeed"><span id="J_averageSpeedAll"></span>s</div>
        				<span class="percentBarNoteText">全国平均速度</span>
        			</div>
        			<div class="averageSpeedL">
        				<div class="averageSpeed"><span id="J_averageSpeedPro"></span>s</div>
        				<span class="percentBarNoteText">全省（<span class="J_provinceName"></span>）平均速度</span>
        			</div>
        			<div class="provinceReverageRate"></div>
        		</div>
        	</div>
        </div>
		<div class="swiper-slide" >
        	<div class="bgTop bgTop5678">
        		<div class="imgBox">
        			<img src="./img/bg5678Top.png">
        			<div id="J_rightRateFN" class="firstName">晓明</div>
        			<div id="J_rightRateSN" class="secondName">小红</div>
        			<div id="J_rightRateTN" class="threedName">小李</div>
        			<div class="firstPercent"><span id="J_rightRateFP">90</span>%</div>
        			<div class="secondPercent"><span id="J_rightRateSP">80</span>%</div>
        			<div class="threedPercent"><span id="J_rightRateTP">70.4</span>%</div>
        		</div>
        	</div>
        	<div class="titleBox bgTitleTop5678">
	        	<div class="commonTitleB">
	        		谁最准
	        	</div>
	        	<div class="commonSubTitle">
		        		按正确率排名
	        	</div>
        	</div>
        	<div id="rightRateListBox1" class="rightRateListBox swiper-no-swiping">
        		<ul id="J_rightRateRankingListBox">
					        			
        		</ul>
                <div class="place1rem"></div>
        	</div>
        	<div class="jumpArr">
        		<img src="./img/bg1ArrB.png">
        	</div>
        </div>
        <div class="swiper-slide" >
        	<div class="bgTop bgTop5678">
        		<div class="imgBox">
        			<img src="./img/bg5678Top.png">
        			<div id="J_speedFN" class="firstName">晓明</div>
        			<div id="J_speedSN" class="secondName">小红</div>
        			<div id="J_speedTN" class="threedName">小李</div>
        			<div class="firstPercent"><span id="J_speedFP"></span>s</div>
        			<div class="secondPercent"><span id="J_speedSP"></span>s</div>
        			<div class="threedPercent"><span id="J_speedTP"></span>s</div>
        		</div>
        	</div>
        	<div class="titleBox bgTitleTop5678">
	        	<div class="commonTitleB">
	        		谁最快
	        	</div>
	        	<div class="commonSubTitle">
		        	按平均每道题耗时长短排名
	        	</div>
        	</div>
        	<div id="rightRateListBox2" class="rightRateListBox swiper-no-swiping">
        		<ul id="J_speedRankingListBox">
        		
        		</ul>
                <div class="place1rem"></div>
        	</div>
        	<div class="jumpArr">
        		<img src="./img/bg1ArrB.png">
        	</div>
        </div>
        <div class="swiper-slide" >
        	<div class="bgTop bgTop5678">
        		<div class="imgBox">
        			<img src="./img/bg5678Top.png">
        		    <div id="J_submitFN" class="firstName">晓明</div>
         			<div id="J_submitSN" class="secondName">小红</div>
         			<div id="J_submitTN" class="threedName">小李</div>
         			<div class="firstPercent"><span id="J_submitFP">90</span>%</div>
        			<div class="secondPercent"><span id="J_submitSP">80</span>%</div>
        			<div class="threedPercent"><span id="J_submitTP">70.4</span>%</div>

        		</div>
        	</div>
        	<div class="titleBox bgTitleTop5678">
	        	<div class="commonTitleB">
	        		谁最勤奋
	        	</div>
	        	<div class="commonSubTitle">
		        		按提交率排名
	        	</div>
        	</div>
        	<div id="rightRateListBox3" class="rightRateListBox swiper-no-swiping">
        		<ul id="J_rightRateListBox">
        		
        		</ul>
                <div class="place1rem"></div>
        	</div>
        	<div class="jumpArr">
        		<img src="./img/bg1ArrB.png">
        	</div>
        </div>
        <div class="swiper-slide" >
        	<div class="bgTop bgTop5678">
        		<div class="imgBox">
        			<img src="./img/bg5678Top.png">
        			<div id="J_PKsucceedNumFN" class="firstName">晓明</div>
        			<div id="J_PKsucceedNumSN" class="secondName">小红</div>
        			<div id="J_PKsucceedNumTN" class="threedName">小李</div>
        			<div class="firstPercent"><span id="J_PKsucceedNumFP" >1290</span>胜</div>
        			<div class="secondPercent"><span id="J_PKsucceedNumSP" >1280</span>胜</div>
        			<div class="threedPercent"><span id="J_PKsucceedNumTP" >1270</span>胜</div>
        		</div>
        	</div>
        	<div class="titleBox bgTitleTop5678">
	        	<div class="commonTitleB">
	        		速算PK之王
	        	</div>
	        	<div class="commonSubTitle">
		        		按PK胜利排名
	        	</div>
        	</div>
        	<div id="rightRateListBox4" class="rightRateListBox swiper-no-swiping">
        		<ul id="J_PKsucceedNumListBox">
        			
        		</ul>
                <div class="place1rem"></div>
        	</div>
        	<div class="jumpArr">
        		<img src="./img/bg1ArrB.png">
        	</div>
        </div>
        <div class="swiper-slide bg9" >
        	<div class="bgTop bgTop9">
        		<img src="./img/bg9Top.png">
        	</div>
        	<div class="resultBoxC">
        		<div class="titleBox">
		        	<div class="commonTitleB">
		        		知识点掌握
		        	</div>
		        	<div class="commonSubTitle">
		        		<a href="###">按正确率从高到低排列</a>
		        	</div>
		        	<div id="rightRateListBox5" class="resultList swiper-no-swiping">
		        		<div class="titleR">
		        			全省
		        		</div>
		        		<div>
		        		<ol id="J_kownledgeRankingListBox">
		        			
		        		</ol>
		        		</div>
		        	</div>
	        	</div>
        	</div>
        	<div class="bgBottom">
        		<img src="./img/bg9Bottom.png">
        	</div>
        </div>

    </div>
</div>

</body>
<script type="text/javascript" src="js/zepto.min.js"></script>
<script type="text/javascript" src="js/swiper-3.2.7.jquery.min.js"></script>
<script type="text/javascript">
var swiper = new Swiper('.swiper-container', {
        pagination: '.swiper-pagination',
        nextButton: '.swiper-button-next',
        prevButton: '.swiper-button-prev',
        direction: 'vertical',
        slidesPerView: 1,
        paginationClickable: true
        // spaceBetween: 30,
        // loop: true
    });
$(function (){
	var setPage = function (){
		var classId = "36382",
			beginTime = "2015-09-01",
			endTime = "2016-01-04",
			cityID = "500",
            provinceId = "2";
		setRight_rate(cityID,provinceId,classId,beginTime,endTime);
		setSomeAreaRightRate(provinceId,beginTime,endTime)
	}
	setPage();
    var nScrollHight1 = 0,nScrollTop1 = 0;   
    var nScrollHight2 = 0,nScrollTop2 = 0;   
    var nScrollHight3 = 0,nScrollTop3 = 0;   
    var nScrollHight4 = 0, nScrollTop4 = 0;  
     var nScrollHight5 = 0, nScrollTop5 = 0;  
    var nDivHight1 = $("#rightRateListBox1").height(),
    nDivHight2 = $("#rightRateListBox2").height(),
    nDivHight3 = $("#rightRateListBox3").height(),
    nDivHight4 = $("#rightRateListBox4").height();
    nDivHight4 = $("#rightRateListBox5").height();
    $("#rightRateListBox1").scroll(function(){
            nScrollHight1 = $(this)[0].scrollHeight;
            nScrollTop1 = $(this)[0].scrollTop;
            if(nScrollTop1 + nDivHight1 >= nScrollHight1){
                swiper.slideTo(5, 3000);
            }
        });
    $("#rightRateListBox2").scroll(function(){
            nScrollHight2 = $(this)[0].scrollHeight;
            nScrollTop2 = $(this)[0].scrollTop;
            if(nScrollTop2 + nDivHight2 >= nScrollHight2){
                swiper.slideTo(6, 2000);
            }
        });
    $("#rightRateListBox3").scroll(function(){
            nScrollHight3 = $(this)[0].scrollHeight;
            nScrollTop3 = $(this)[0].scrollTop;
            if(nScrollTop3 + nDivHight3 >= nScrollHight3){
                swiper.slideTo(7, 1000);
            }
        });
    $("#rightRateListBox4").scroll(function(){
            nScrollHight4 = $(this)[0].scrollHeight;
            nScrollTop4 = $(this)[0].scrollTop;
            if(nScrollTop4 + nDivHight4 >= nScrollHight4){
                swiper.slideTo(8, 1000);
            }
        });
    $("#rightRateListBox5").scroll(function(){
            nScrollHight5 = $(this)[0].scrollHeight;
            nScrollTop5 = $(this)[0].scrollTop;
            if(nScrollTop5 + nDivHight5 >= nScrollHight5){
                swiper.slideTo(8, 1000);
            }
        });
})
function setScrollPage(id,nScrollHight,nScrollTop,nDivHight){
        nScrollHight = $(id)[0].scrollHeight;
        nScrollTop = $(id)[0].scrollTop;
        if(nScrollTop + nDivHight >= nScrollHight){
            swiper.slideNext();
        }
}
function getFloat2(str){
    if(str == 1){
        var str = ""+str*100+".0";
    }else{
        var str = ""+str*100;
    }
	
	return str.substring(0,str.indexOf(".") + 3)
}
function getFloat3(str){
	var str = ""+str;
	return str.substring(0,str.indexOf(".") + 4)
}

function setInText(id,text){
	$(id).text(text)
}
function setInChildText(id,text){
	$(id).children().text(text)
}
function compare(propertyName) { 
	return function (object1, object2) { 
		var value1 = object1[propertyName]; 
		var value2 = object2[propertyName]; 
		if (value2 < value1) { 
			return -1; 
		} 
		else if (value2 > value1) { 
			return 1; 
		} 
		else { 
			return 0; 
		} 
	} 
} 
function setAll(){
}





function setSomeAreaRightRate(provinceId,BeginTime,EndTime){
	var url = "@php/v1_statistics/select/enum/";
//  获得全国平均正确率   J_averageRightRateAll
    var dataAllAreaRightRate = '{"target":"provincecoursesection-right_rate", "filter":[{"item":"provincecoursesection-province_id","type":"=","value":"999999"},{"item":"provincecoursesection-coursesection_id","type":"=","value":"999999"}]}'
    
    $.ajax({
            url: "Interface.aspx?url=" + encodeURIComponent(url),
            type: 'post',
            data: dataAllAreaRightRate,
            contentType: "application/json",
            dataType: 'json',
            success: function (data) {
                var allAreaRightRate = data.data[0].enum
                $(".J_averageRightRateAll").text(allAreaRightRate);
                $(".J_averageRightRateAllPercent").css("width",allAreaRightRate+"%");//ALLareaRightRate
            }
        });
	//	获得某地区平均正确率   J_averageRightRateAll  J_provinceName  J_percentProvince
	var dataAreaRightRate =  '{"target":"provincecoursesection-right_rate", "filter":[{"item":"provincecoursesection-province_id","type":"=","value":"'+provinceId+'"},{"item":"provincecoursesection-coursesection_id","type":"=","value":"999999"}]}'
	
	$.ajax({
            url: "Interface.aspx?url=" + encodeURIComponent(url),
            type: 'post',
            data: dataAreaRightRate,
            contentType: "application/json",
            dataType: 'json',
            success: function (data) {
              	var areaRightRate = data.data[0].enum;
              	$(".J_provinceRightRate").text(areaRightRate);
              	$(".J_provincePercent").css("width",areaRightRate+"%");//areaRightRate
            }
        });

    //某地区平均花费时间。
    var dataAreaCostTime = '{"target":"provincespendtime-spend_time", "filter":[{"item":"provincespendtime-province_id","type":"=","value":"'+provinceId+'"}]}' 
    
    $.ajax({
            url: "Interface.aspx?url=" + encodeURIComponent(url),
            type: 'post',
            data: dataAreaCostTime,
            contentType: "application/json",
            dataType: 'json',
            success: function (data) {
                var areaCostTime = data.data[0].enum;
                //areaCostTime = 12
                $("#J_averageSpeedPro").text(getFloat3(areaCostTime/1000))
                
            }
        });
    //全国平均花费时间。
    var dataCountory = '{"target":"provincespendtime-spend_time", "filter":[{"item":"provincespendtime-province_id","type":"=","value":"999999"}]}'
    
    $.ajax({
            url: "Interface.aspx?url=" + encodeURIComponent(url),
            type: 'post',
            data: dataCountory,
            contentType: "application/json",
            dataType: 'json',
            success: function (data) {
                var countyCostTime = data.data[0].enum;
                $("#J_averageSpeedAll").text(getFloat3(countyCostTime/1000))        
            }
        });
	
}
function setRight_rate(CityId,provinceId,ClassID,BeginTime,EndTime) {
		var url = "@php/v1_statistics/select/data/";

        var dataAllRate = '{"data":{"target":"homeworkanswer-right_rate","data_type":"avg","type":"normal"},"time_unit":"0","multi_unit":"","filter":[{"item":"homeworkanswer-class_id","type":"=","value":"'+ClassID+'"},{"item":"homeworkanswer-homework_type","type":"=","value":"All"},{"item":"homeworkanswer-day","type":">=","value":"'+BeginTime+'"},{"item":"homeworkanswer-day","type":"<=","value":"'+EndTime+'"}]}' ;
       //设置总正确率
        $.ajax({
            url: "Interface.aspx?url=" + encodeURIComponent(url),
            type: 'post',
            data: dataAllRate,
            contentType: "application/json",
            dataType: 'json',
            success: function (data) {
              	var rightRate = data.data[0].result;
              	rightRate = rightRate.substring(0,rightRate.indexOf(".") + 3);
              	$(".J_Rate").text(rightRate);//设置正确率
              	//console.log(data.data[0].result);
              	$("#learnDuringTime").text(BeginTime+"-"+EndTime)
            }
        });
        var dataMale = '{"data":{"target":"homeworkanswer-right_rate","data_type":"avg","type":"normal"},"time_unit":"0","multi_unit":"","filter":[{"item":"homeworkanswer-class_id","type":"=","value":"'+ClassID+'"},{"item":"homeworkanswer-homework_type","type":"=","value":"All"},{"item":"homeworkanswer-day","type":">=","value":"'+BeginTime+'"},{"item":"homeworkanswer-day","type":"<=","value":"'+EndTime+'"},{"item":"student-sex","type":"=","value":"2"}]}' ;
        var dataFemale = '{"data":{"target":"homeworkanswer-right_rate","data_type":"avg","type":"normal"},"time_unit":"0","multi_unit":"","filter":[{"item":"homeworkanswer-class_id","type":"=","value":"'+ClassID+'"},{"item":"homeworkanswer-homework_type","type":"=","value":"All"},{"item":"homeworkanswer-day","type":">=","value":"'+BeginTime+'"},{"item":"homeworkanswer-day","type":"<=","value":"'+EndTime+'"},{"item":"student-sex","type":"=","value":"1"}]}' ;
        //某班女生正确率
        $.ajax({
            url: "Interface.aspx?url=" + encodeURIComponent(url),
            type: 'post',
            data: dataMale,
            contentType: "application/json",
            dataType: 'json',
            success: function (data) {
              	var maleRightRate = data.data[0].result;
              	maleRightRate = maleRightRate.substring(0,maleRightRate.indexOf(".") + 3);
              	$(".J_maleRate").text(maleRightRate);//设置女生正确率
            }
        	});
        //某班男生正确率
        $.ajax({
            url: "Interface.aspx?url=" + encodeURIComponent(url),
            type: 'post',
            data: dataFemale,
            contentType: "application/json",
            dataType: 'json',
            success: function (data) {
              	var femaleRightRate = data.data[0].result;
              	femaleRightRate = femaleRightRate.substring(0,femaleRightRate.indexOf(".") + 3);
              	$(".J_femaleRate").text(femaleRightRate);//设置男生正确率
              //	console.log(data.data[0].result);
              	$("#learnDuringTime").text(BeginTime+"-"+EndTime)
            }
        });
        var dataClassAverageTime = '{"data":{"target":"homeworkanswer-spend_time","data_type":"avg","type":"normal"},"time_unit":"0","multi_unit":"","filter":[{"item":"homeworkanswer-class_id","type":"=","value":"'+ClassID+'"},{"item":"homeworkanswer-homework_type","type":"=","value":"All"},{"item":"homeworkanswer-day","type":">=","value":"'+BeginTime+'"},{"item":"homeworkanswer-day","type":"<=","value":"'+EndTime+'"}]}' 
		//班级平均花费时间
		$.ajax({
	            url: "Interface.aspx?url=" + encodeURIComponent(url),
	            type: 'post',
	            data: dataClassAverageTime,
	            contentType: "application/json",
	            dataType: 'json',
	            success: function (data) {
	              	var classAverageTime = data.data[0].result/1000;
	              	classAverageTime = getFloat3(classAverageTime);
	              	$(".J_averageTime").text(classAverageTime);//设置某班级平均时间
	              //	console.log(data.data[0].result);
	            }
	        });
		var dataMaleAverageTime = '{"data":{"target":"homeworkanswer- spend_time","data_type":"avg","type":"normal"},"time_unit":"0","multi_unit":"","filter":[{"item":"homeworkanswer-class_id","type":"=","value":"'+ClassID+'"},{"item":"homeworkanswer-homework_type","type":"=","value":"All"},{"item":"homeworkanswer-day","type":">=","value":"'+BeginTime+'"},{"item":"homeworkanswer-day","type":"<=","value":"'+EndTime+'"},{"item":"student-sex","type":"=","value":"2"}]}' 
		//某班女生平均花费时间
		$.ajax({
	            url: "Interface.aspx?url=" + encodeURIComponent(url),
	            type: 'post',
	            data: dataMaleAverageTime,
	            contentType: "application/json",
	            dataType: 'json',
	            success: function (data) {
	              	var maleAverageTime = data.data[0].result/1000;
	              	maleAverageTime = getFloat3(maleAverageTime);
	              	$(".J_maleTime").text(maleAverageTime);//设置某班级男生平均时间
	              //	console.log(data.data[0].result);
	            }
	        });
		var dataFemaleAverageTime = '{"data":{"target":"homeworkanswer- spend_time","data_type":"avg","type":"normal"},"time_unit":"0","multi_unit":"","filter":[{"item":"homeworkanswer-class_id","type":"=","value":"'+ClassID+'"},{"item":"homeworkanswer-homework_type","type":"=","value":"All"},{"item":"homeworkanswer-day","type":">=","value":"'+BeginTime+'"},{"item":"homeworkanswer-day","type":"<=","value":"'+EndTime+'"},{"item":"student-sex","type":"=","value":"1"}]}' 
		//某班男生平均花费时间
		$.ajax({
	            url: "Interface.aspx?url=" + encodeURIComponent(url),
	            type: 'post',
	            data: dataFemaleAverageTime,
	            contentType: "application/json",
	            dataType: 'json',
	            success: function (data) {
	              	var femaleAverageTime = data.data[0].result/1000;
	              	femaleAverageTime = getFloat3(femaleAverageTime)
	              	$(".J_femaleTime").text(femaleAverageTime);//设置某班级男生平均时间
	              //	console.log(data.data[0].result);
	            }
	        });
		//获得某班级学生提交率//拼接谁最勤奋列表
		var step2 = function (classWorksNums){
			
			var dataClassSubmissionRate = '{"data":{"target":"homeworkanswer-homework_id","data_type":"count","type":"rank-r"},"time_unit":"0","multi_unit":"homeworkanswer-student_id","filter":[{"item":"homeworkanswer-class_id","type":"=","value":"'+ClassID+'"},{"item":"homeworkanswer-day","type":">=","value":"'+BeginTime+'"},{"item":"homeworkanswer-day","type":"<=","value":"'+EndTime+'"}]}' 
			$.ajax({
	            url: "Interface.aspx?url=" + encodeURIComponent(url),
	            type: 'post',
	            data: dataClassSubmissionRate,
	            contentType: "application/json",
	            dataType: 'json',
	            success: function (data) {
	              	var stuNum = data.data[0].result;
	              	var classWorksNum = parseInt($(".J_ClassWorksNums").html());
	              	var stuArr  = data.data;
	              	var averageSubRate = 0;
	              	for (var i = 0;i < stuArr.length ; i++) {
	              		stuArr[i].subRate = getFloat2(stuArr[i].result/classWorksNum);
	              		averageSubRate += stuArr[i].result/classWorksNum;
	              	};
	              	var classSubmissionRate = averageSubRate/stuArr.length;
	              	classSubmissionRate = getFloat2(classSubmissionRate);//保留两位
	              	$(".J_classSubmissionRate").text(classSubmissionRate);//设置某班级学生提交率
	                setRightRateRankingList(stuArr);//拼接谁最勤奋列表
	            }
	        });
		}
		//获取取得班级作业数
		var step1 = function (){
			
			var dataClassWorksNums = '{"data":{"target":"homework-homework_id","data_type":"count","type":"normal"},"time_unit":"0","multi_unit":"","filter":[{"item":"homework-class_id","type":"=","value":"'+ClassID+'"},{"item":"homework-day","type":">=","value":"'+BeginTime+'"},{"item":"homework-day","type":"<=","value":"'+EndTime+'"}]}' 
			$.ajax({
	            url: "Interface.aspx?url=" + encodeURIComponent(url),
	            type: 'post',
	            data: dataClassWorksNums,
	            contentType: "application/json",
	            dataType: 'json',
	            success: function (data) {
	              	classWorksNums = data.data[0].result;
	              	classWorksNums = getFloat2(classWorksNums);//获取两位小数
	              	$(".J_ClassWorksNums").text(classWorksNums);//设置某班级作业数
	              step2(classWorksNums);
	            }
	        });
		}
		step1();
	
		//获得某班级学生pk获胜数
		var dataPK = '{"data":{"target":"pkwin-count_win","data_type":"sum","type":"rank-r"},"time_unit":"0","multi_unit":"pkwin-student_id","filter":[{"item":"r+student_id+class-class_id","type":"=","value":"'+ClassID+'"},{"item":"pkwin-week","type":">=","value":"'+BeginTime+'"},{"item":"pkwin-week","type":"<=","value":"'+EndTime+'"}]}' ;
        $.ajax({
            url: "Interface.aspx?url=" + encodeURIComponent(url),
            type: 'post',
            data: dataPK,
            contentType: "application/json",
            dataType: 'json',
            success: function (data) {
              	var PKnumRanking = data.data;
              	
              	setPKRankingList(PKnumRanking) ;

            }
        	});
        //获得某班级知识点正确率
        var url2 = "@php/v1_statistics/select/enum/";
		var dataClassKnowkeyRightRate = '{"data":{"target":"homeworkcoursesection-right_rate","data_type":"avg","type":"rank-r"},"time_unit":"0","multi_unit":"homeworkcoursesection-coursesection_id","filter":[{"item":"homework-class_id","type":"=","value":"'+ClassID+'"},{"item":"homework-day","type":">=","value":"'+BeginTime+'"},{"item":"homework-day","type":"<=","value":"'+EndTime+'"}]}' 
		$.ajax({
	            url: "Interface.aspx?url=" + encodeURIComponent(url),
	            type: 'post',
	            data: dataClassKnowkeyRightRate,
	            contentType: "application/json",
	            dataType: 'json',
	            success: function (data) {
	              	var classKnowkeyRightRateArr = data.data;
	              	var konwledgeQuanlity = classKnowkeyRightRateArr.length;
                    var str
	              	$(".J_kownledgeQuanlity").text(konwledgeQuanlity);
	              	setkownledgeRankingList(classKnowkeyRightRateArr);
                   // var classKnowledgeArr = [];
                    var arr = $(".J_allAverknowledgesRates");
                    for(var i=0;i<konwledgeQuanlity;i++){
                      //  classKnowledgeArr.push(classKnowkeyRightRateArr[i].multi_data);
                        str = setAllkownledgerateRate(url2,provinceId,classKnowkeyRightRateArr[i].multi_data,arr[i]);
                        
                    }
                    
	              	
	            }
	        });
		//获得班级谁最快列表
		var dataClassSpeedRanking = '{"data":{"target":"homeworkanswer-spend_time","data_type":"avg","type":"rank-r"},"time_unit":"0","multi_unit":"homeworkanswer-student_id","filter":[{"item":"homeworkanswer-class_id","type":"=","value":"'+ClassID+'"},{"item":"homeworkanswer-homework_type","type":"=","value":"All"},{"item":"homeworkanswer-day","type":">=","value":"'+BeginTime+'"},{"item":"homeworkanswer-day","type":"<=","value":"'+EndTime+'"}]}' 
		$.ajax({
	            url: "Interface.aspx?url=" + encodeURIComponent(url),
	            type: 'post',
	            data: dataClassSpeedRanking,
	            contentType: "application/json",
	            dataType: 'json',
	            success: function (data) {
	              	var dataClassSpeedRanking = data.data;
	              	setspeedRankingList(dataClassSpeedRanking);
	            }
	        });
		var dataRightRateRanking = '{"data":{"target":"homeworkanswer-right_rate","data_type":"avg","type":"rank-r"},"time_unit":"0","multi_unit":"homeworkanswer-student_id","filter":[{"item":"homeworkanswer-class_id","type":"=","value":"'+ClassID+'"},{"item":"homeworkanswer-homework_type","type":"=","value":"All"},{"item":"homeworkanswer-day","type":">=","value":"'+BeginTime+'"},{"item":"homeworkanswer-day","type":"<=","value":"'+EndTime+'"}]}'
		$.ajax({
	            url: "Interface.aspx?url=" + encodeURIComponent(url),
	            type: 'post',
	            data: dataRightRateRanking,
	            contentType: "application/json",
	            dataType: 'json',
	            success: function (data) {
	              	var dataRightRateRankingList = data.data;
	              	setRightRateRanking(dataRightRateRankingList);
	            }
	        });
		//有多少道题
		// var dataQuesitionsQuan = '{"data":{"target":"homeworkcoursesection-coursesection_id","data_type":"count","type":"normal"},"time_unit":"0","multi_unit":"","filter":[{"item":"homework-class_id","type":"=","value":"'+ClassID+'"},{"item":"homework-day","type":">=","value":"'+BeginTime+'"},{"item":"homework-day","type":"<=","value":"'+EndTime+'"}]}' 
		var dataQuesitionsQuan = '{"data":{"target":"homeworkcoursesection-count","data_type":"sum","type":"normal"},"time_unit":"0","multi_unit":"","filter":[{"item":"homework-class_id","type":"=","value":"'+ClassID+'"},{"item":"homework-day","type":">=","value":"'+BeginTime+'"},{"item":"homework-day","type":"<=","value":"'+EndTime+'"}]}' 
		$.ajax({
	            url: "Interface.aspx?url=" + encodeURIComponent(url),
	            type: 'post',
	            data: dataQuesitionsQuan,
	            contentType: "application/json",
	            dataType: 'json',
	            success: function (data) {
	              	
	              var dataquesitionQuan = data.data[0].result;
	              $(".J_dataquesitionQuan").text(dataquesitionQuan)
	            }
	        });

}


//设置正确率排名
function setRightRateRankingList(stuArr){
	var stuList = stuArr; 
	var html ="";
	for(var i = 0;i < stuList.length;i++){
		if(i < stuList.length){
			switch (i){
				case 0:setInText("#J_submitFN",stuList[i].show_name);setInText("#J_submitFP",stuList[i].subRate);break;
				case 1:setInText("#J_submitSN",stuList[i].show_name);setInText("#J_submitSP",stuList[i].subRate);break;
				case 2:setInText("#J_submitTN",stuList[i].show_name);setInText("#J_submitTP",stuList[i].subRate);break;
			  default:html += setSubmitRateList4(stuList[i],i+1);
			}
		}
	}
    html = html+"<div style=\"clear:both;\"></div>"
	$("#J_rightRateListBox").append(html)
}
function setSubmitRateList4(stuListOne,rankNum){
		return "<li><div><div class=\"listIconBox\"><img src=\"./img/listIcon.png\"></div><span class=\"rankingNum\">"+rankNum+"</span><span class=\"rankingName\">"+stuListOne.show_name+"</span></div><div class=\"percentBarBox fl\" ><div class=\"percentBar blue\" style=\"width:"+stuListOne.subRate+"%\"></div></div><span class=\"percentNum fr\">"+stuListOne.subRate+"%</span></li>"
}
//设置PK胜利数排名
function setPKRankingList(stuArr){
	var stuList = stuArr; 
	var html ="";
	var maxResult = stuList[0].result;
	//排序错误////////////////////////////////////////////////////////////
	var maxResult = 400;
	for(var i = 0;i < stuList.length;i++){
		stuArr[i].PKpercent = getFloat2(stuList[i].result/maxResult);
			switch (i){
				case 0:setInText("#J_PKsucceedNumFN",stuList[i].show_name);setInText("#J_PKsucceedNumFP",stuList[i].result);break;
				case 1:setInText("#J_PKsucceedNumSN",stuList[i].show_name);setInText("#J_PKsucceedNumSP",stuList[i].result);break;
				case 2:setInText("#J_PKsucceedNumTN",stuList[i].show_name);setInText("#J_PKsucceedNumTP",stuList[i].result);break;
			  default:html += setPKRankingList4(stuList[i],i+1);
			}
		}
     html = html+"<div style=\"clear:both;\"></div>"
	$("#J_PKsucceedNumListBox").append(html)
}

function setPKRankingList4(stuListOne,rankNum){
		return "<li><div><div class=\"listIconBox\"><img src=\"./img/listIcon.png\"></div><span class=\"rankingNum\">"+rankNum+"</span><span class=\"rankingName\">"+stuListOne.show_name+"</span></div><div class=\"percentBarBox fl\" ><div class=\"percentBar orange\" style=\"width:"+stuListOne.PKpercent+"%\"></div></div><span class=\"percentNum fr\">"+stuListOne.result+"胜</span></li>"

}
//设置知识点掌握数排名
function setkownledgeRankingList(stuArr){
	var stuList = stuArr; 
	var html ="";
	var maxResult = 400;
	for(var i = 0;i < stuList.length;i++){
		html += setkownledgeRankingList4(stuList[i],i+1);
	}
     html = html+"<div style=\"clear:both;\"></div>"
	$("#J_kownledgeRankingListBox").append(html);

}
function setkownledgeRankingList4(stuListOne){
	return "<li><div class=\"konwledgeTitle\">"+stuListOne.show_name+"</div>	<div class=\"J_allAverknowledgesRates tips fr \">90.32%</div><div class=\"tips fontB fr\"><span >"+getFloat2(stuListOne.result/100)+"</span>%</div></li>"
}

function setAllkownledgerateRate (url,provinceId,classKnowledgeArrId,obj){
		var dataKownledge = '{"target":"provincecoursesection-right_rate", "filter":[{"item":"provincecoursesection-province_id","type":"=","value":"'+provinceId+'"},{"item":"provincecoursesection-coursesection_id","type":"=","value":"'+classKnowledgeArrId+'"}]}'  
        var knowledgesStr = "";
			$.ajax({
	            url: "Interface.aspx?url=" + encodeURIComponent(url),
	            type: 'post',
	            data: dataKownledge,
	            contentType: "application/json",
	            dataType: 'json',
	            success: function (data) {
	            	 knowledgesStr = data.data[0].enum;
                     $(obj).text(knowledgesStr+"%");
	            }
	        });
        return knowledgesStr + "%";
	} 
function setspeedRankingList(stuArr){
	var stuList = stuArr; 
	var html ="";
	var maxResult = stuArr[0].result;
	for(var i = 0;i < stuList.length;i++){
		if(i < stuList.length){
			switch (i){
				case 0:setInText("#J_speedFN",stuList[i].show_name);setInText("#J_speedFP",getFloat3(stuList[i].result/1000));break;
				case 1:setInText("#J_speedSN",stuList[i].show_name);setInText("#J_speedSP",getFloat3(stuList[i].result/1000));break;
				case 2:setInText("#J_speedTN",stuList[i].show_name);setInText("#J_speedTP",getFloat3(stuList[i].result/1000));break;
			  default:html += setkownspeedRankingList4(stuList[i],i+1,maxResult);
			}
		}
	}
     html = html+"<div style=\"clear:both;\"></div>"
	$("#J_speedRankingListBox").append(html)
}
function setkownspeedRankingList4(stuListOne,num,maxResult){
	return "<li> <div><div class=\"listIconBox\"><img src=\"./img/listIcon.png\"></div><span class=\"rankingNum\">"+num+"</span><span class=\"rankingName\">"+stuListOne.show_name+"</span></div><div class=\"percentBarBox fl\"><div class=\"percentBar yellow\" style=\"width:50%\"></div></div><span class=\"percentNum fr\"> "+getFloat3(stuListOne.result/1000)+"s</span></li>"
}
function setRightRateRanking(stuArr){
	var stuList = stuArr; 
	var html ="";
	for(var i = 0;i < stuList.length;i++){
		if(i < stuList.length){
			switch (i){
				case 0:setInText("#J_rightRateFN",stuList[i].show_name);setInText("#J_rightRateFP",getFloat2(stuList[i].result/100));break;
				case 1:setInText("#J_rightRateSN",stuList[i].show_name);setInText("#J_rightRateSP",getFloat2(stuList[i].result/100));break;
				case 2:setInText("#J_rightRateTN",stuList[i].show_name);setInText("#J_rightRateTP",getFloat2(stuList[i].result/100));break;
			  default:html += setRightRateRankingList4(stuList[i],i+1);
			}
		}
	}
     html = html+"<div style=\"clear:both;\"></div>"
	$("#J_rightRateRankingListBox").append(html);
}
function setRightRateRankingList4(stuListOne,num){
	return "<li><div><div class=\"listIconBox\"><img src=\"./img/listIcon.png\"></div><span class=\"rankingNum\">"+num+"</span><span class=\"rankingName\">"+stuListOne.show_name+"</span></div><div class=\"percentBarBox fl\"><div class=\"percentBar\" style=\"width:"+getFloat2(stuListOne.result/100)+"%\"></div></div><span class=\"percentNum fr\" >"+getFloat2(stuListOne.result/100)+"%</span></li>"
}

</script>
</html>